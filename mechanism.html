<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DNA Mechanism</title>
    <style>
 .sidebar-toggle {
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 1000;
            cursor: pointer;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: #1a2980;
            border-radius: 50%;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
        }

        .sidebar-toggle:hover {
            background-color: rgba(255, 255, 255, 1);
            transform: scale(1.1);
        }

        .sidebar-toggle-icon {
            font-size: 20px;
            color: white;
        }

        /* Sidebar styles */
        .sidebar {
            width: 280px;
            background: white;
            color: #333;
            padding: 30px 20px;
            position: fixed;
            height: 100vh;
            overflow-y: auto;
            z-index: 999;
            left: -280px;
            top: 0;
            transition: left 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 2px 0 15px rgba(0, 0, 0, 0.05);
            border-right: 1px solid #eee;
        }

        .sidebar.active {
            left: 0;
        }

        /* Submenu styles */
        .sub-links {
            list-style: none;
            padding-left: 15px;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out;
        }

        .has-submenu.active .sub-links {
            max-height: 500px;
        }

        .has-submenu {
            position: relative;
        }

        .has-submenu::after {
            content: '▼';
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 0.8em;
            transition: transform 0.3s ease;
        }

        .has-submenu.active::after {
            transform: translateY(-50%) rotate(180deg);
        }

        
        /* NAVIGATION LINKS */
        .nav-links {
            list-style: none;
            padding: 0;
        }
        
        .nav-links li {
            margin-bottom: 10px;
        }
        
        .nav-links a {
            color: #555;
            text-decoration: none;
            display: block;
            padding: 10px;
            border-radius: 5px;
            transition: all 0.3s ease;
        }

        .nav-links a:hover {
            background: rgba(255,255,255,0.1);
        }

.scene.chemistry-theme {
            width: 100%;
            padding: 2rem;
            background: 
                url('https://www.transparenttextures.com/patterns/hexellence.png') repeat,
                linear-gradient(135deg, #f0f8ff 0%, #e0f7fa 100%);
            background-blend-mode: overlay;
            box-shadow: inset 0 0 0 1000px rgba(255, 255, 255, 0.6);
            backdrop-filter: blur(4px);
            border-top: 6px solid #4db6ac;
            border-bottom: 6px solid #4db6ac;
            box-sizing: border-box;

            display: flex;
            flex-wrap: wrap;
            gap: 2rem;
            align-items: center; /* ✅ Center content vertically */
            justify-content: center;
        }

        .scene figure {
            flex: 1 1 300px;
            margin: 0;
            text-align: center;
        }

        .scene img {
            max-width: 100%;
            height: auto;
            border-radius: 12px;
            display: block;
            margin: 0 auto;
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.15);
        }

        .main-caption {
            text-align: center;
            font-weight: 600;
            font-size: 1.2rem;
            color: #00796b;
            margin-top: 1rem;
        }

        .source-caption {
            text-align: center;
            font-size: 0.9rem;
            color: #555;
            margin-bottom: 1.5rem;
        }

        .description {
            flex: 1 1 400px;
            font-size: 1.05rem;
            color: #333;
            line-height: 1.8;
            background: rgba(255, 255, 255, 0.85);
            padding: 1.5rem 2rem;
            border-radius: 12px;
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.08);
            display: flex;
            flex-direction: column;
            justify-content: center; /* ✅ Vertically center text inside box */
            text-align: justify;
        }

  /* Base styles */
  html, body {
            width: 100%;
            height: 100%;
            font-family: 'Arial', sans-serif;
            color: #333;
            line-height: 1.6;
            scroll-behavior: smooth;
            background: #f5f7fa;
            margin: 0;
            padding: 0;
        }

        /* Main content styles */
        .main-content {
            padding: 20px;
            width: 80%;
            max-width: 1200px;
            margin: 0 auto;
        }

        .scene {
            min-height: 50vh;
            padding: 40px 20px;
            margin-bottom: 20px;
            background: white;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            position: relative;
        }

        .scene::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 10px;
            background: linear-gradient(90deg, #1a2980, #26d0ce);
            border-radius: 20px 20px 0 0;
        }

        .scene h2 {
            color: #1a2980;
            border-bottom: 3px solid #26d0ce;
            padding-bottom: 15px;
            margin-top: 0;
            font-size: 2.2rem;
            margin-bottom: 20px;
            position: relative;
        }

        /* Interactive module styles */
        .interactive-module {
            margin: 20px 0;
            padding: 20px;
            background: white;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        }

        .module-content {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        /* DNA Visualization Styles */
        .dna-replication-container {
            position: relative;
            height: 600px;
            margin: 20px 0;
            overflow: hidden;
        }

        .dna-replication-container svg {
            width: 100%;
            height: 100%;
            display: block;
        }

        /* DNA Backbone styles */
        .backbone {
            stroke-width: 4;
            fill: none;
            stroke-linecap: round;
            transition: all 0.5s ease;
        }
        
        .leading-strand {
            stroke: #1a2980;
        }
        
        .lagging-strand {
            stroke: #26d0ce;
        }
        
        /* Base pair styles */
        .base-pair {
            stroke-width: 3;
            transition: all 0.5s ease;
        }
        
        .adenine { stroke: #FF6B6B; }    /* A */
        .thymine { stroke: #FFD166; }    /* T */
        .cytosine { stroke: #06D6A0; }   /* C */
        .guanine { stroke: #118AB2; }     /* G */
        
        /* Enzyme styles */
        .enzyme {
            opacity: 0;
            transition: all 0.5s ease;
        }
        
        .helicase {
            fill: #FFA500;
        }
        
        .polymerase {
            fill: #9b59b6;
        }
        
        .primase {
            fill: #e74c3c;
        }
        
        /* New DNA strands */
        .new-strand {
            stroke-width: 3;
            stroke-dasharray: 5,3;
            opacity: 0;
            transition: all 0.5s ease;
        }
        
        .leading-new {
            stroke: #1a2980;
        }
        
        .lagging-new {
            stroke: #26d0ce;
        }
        
        /* Okazaki fragments */
        .okazaki {
            stroke: #26d0ce;
            stroke-width: 3;
            stroke-dasharray: 5,3;
            opacity: 0;
            transition: all 0.5s ease;
        }
        
        /* Direction indicators */
        .direction-arrow {
            opacity: 0;
            transition: all 0.5s ease;
        }
        
        /* Alkylation effects */
        .alkylated {
            stroke: #c0392b;
            stroke-width: 6 !important;
            animation: pulse 1s infinite alternate;
        }
        
        @keyframes pulse {
            0% { stroke-width: 6; opacity: 0.9; }
            100% { stroke-width: 8; opacity: 1; }
        }
        
        /* Replication fork lines */
        .fork-line {
            stroke: #888;
            stroke-width: 2;
            stroke-dasharray: 5,3;
            opacity: 0;
            transition: all 0.5s ease;
        }
        
        /* Explanation box */
        .explanation-box {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
            border-left: 5px solid #1a2980;
        }
        
        /* Step indicator and controls */
        .step-indicator {
            text-align: center;
            margin: 10px 0;
            font-weight: bold;
            color: #2c3e50;
            font-size: 1.2rem;
        }
        
        .step-navigation {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 20px;
        }
        
        .control-btn {
            padding: 10px 20px;
            background: #1a2980;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1rem;
        }
        
        .control-btn:hover {
            background: #26d0ce;
            transform: translateY(-2px);
        }
        
        .control-btn:disabled {
            background: #cccccc;
            cursor: not-allowed;
        }

        /* Header styles */
        .header {
            text-align: center;
            padding: 80px 20px 60px;
            background: linear-gradient(135deg, #1a2980, #26d0ce);
            color: white;
            position: relative;
            clip-path: polygon(0 0, 100% 0, 100% 90%, 0 100%);
            margin-bottom: -30px;
        }
        
        .header h1 {
            font-size: 2.8rem;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .header p {
            font-size: 1.3rem;
            max-width: 800px;
            margin: 0 auto;
            opacity: 0.9;
        }

        /* Footer styles */
        .footer {
            text-align: center;
            padding: 40px 20px;
            background: linear-gradient(135deg, #1a2980, #26d0ce);
            color: white;
            margin-top: 40px;
        }
        
        .footer p {
            font-size: 1.1rem;
            max-width: 800px;
            margin: 0 auto;
            line-height: 1.6;
        }



        /* Responsive adjustments */
        @media (max-width: 768px) {
            .main-content {
                width: 95%;
                padding: 10px;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .header p {
                font-size: 1.1rem;
            }
            
            .dna-replication-container {
                height: 400px;
            }
        }
        @media (max-width: 768px) {
            .sidebar {
                width: 250px;
            }
            
            .sidebar-expanded .main-content {
                position: fixed;
                left: 250px;
                width: 100%;
            }
            
            .sidebar-expanded::after {
                content: '';
                position: fixed;
                top: 0;
                left: 250px;
                right: 0;
                bottom: 0;
                background: rgba(0,0,0,0.5);
                z-index: 998;
            }
        }

        .big-arrow {
  width: 100px;
  height: 100px;
  margin: 40px auto;
  position: relative;
  background: linear-gradient(135deg, #4db6ac, #00796b);
  clip-path: polygon(
    50% 0%,   /* tip */
    100% 60%, /* right wing */
    75% 60%,  
    75% 100%, /* right tail */
    25% 100%, /* left tail */
    25% 60%,  
    0% 60%    /* left wing */
  );
  filter: drop-shadow(2px 4px 6px rgba(0,0,0,0.2));
  transition: background 0.3s ease;
}

.big-arrow:hover {
  background: linear-gradient(135deg, #81c784, #388e3c);
  cursor: pointer;
}




@keyframes agent-move {
    0% { transform: translate(0,0); }
    100% { transform: translate(40px,80px); }
}

        .animate-step {
            animation: fadeIn 0.8s ease-out forwards;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Animation styles */
.backbone, .new-strand, .okazaki, .enzyme {
    transition: opacity 0.3s ease;
}

.helicase {
    fill: #FF6B6B;
}

.primase {
    fill: #4ECDC4;
}

.polymerase {
    fill: #45B7D1;
}

.new-strand {
    stroke-width: 2;
    stroke-dasharray: 1000;
    stroke-dashoffset: 1000;
    fill: none;
}

.leading-new {
    stroke: #1a2980;
}

.lagging-new {
    stroke: #26d0ce;
}

.okazaki {
    stroke: #26d0ce;
    stroke-width: 2;
    fill: none;
}

/* Animation classes */
.animate-step {
    animation: pulse 0.5s ease;
}

@keyframes pulse {
    0% { transform: scale(1); }
    50% { transform: scale(1.05); }
    100% { transform: scale(1); }
}

/* Explanation box animation */
.explanation-box {
    transition: all 0.3s ease;
}

.subtitle {
            text-align: center;
            color: #7f8c8d;
            font-size: 1.2rem;
            margin-bottom: 30px;
        }

        .explanation {
            background: linear-gradient(135deg, #e8f4fd, #f0f8ff);
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 20px;
            border-left: 5px solid #3498db;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        }

        .explanation h3 {
            margin-top: 0;
            color: #2c3e50;
            font-size: 1.3rem;
        }

        .dna-container {
            background: linear-gradient(135deg, #1a1a2e, #16213e);
            border: 2px solid #ddd;
            border-radius: 15px;
            padding: 30px;
            margin: 20px 0;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .dna-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: radial-gradient(circle at center, rgba(52, 152, 219, 0.1) 0%, transparent 70%);
            pointer-events: none;
        }

        .dna-svg {
            width: 100%;
            max-width: 900px;
            height: 400px;
            border-radius: 10px;
            background: rgba(0, 0, 0, 0.1);
        }

        .controls {
            text-align: center;
            margin: 30px 0;
            display: flex;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
        }

        .btn {
            background: linear-gradient(45deg, #3498db, #2980b9);
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 1.1rem;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(52, 152, 219, 0.3);
            font-weight: 600;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(52, 152, 219, 0.4);
        }

        .btn:disabled {
            background: linear-gradient(45deg, #bdc3c7, #95a5a6);
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .step-info {
            background: linear-gradient(135deg, #fff3cd, #ffeaa7);
            border: 2px solid #ffeaa7;
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            text-align: center;
            font-size: 1.1rem;
            font-weight: bold;
            color: #856404;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        /* DNA Helix Styles */
        .dna-strand {
            stroke-width: 4;
            fill: none;
            filter: drop-shadow(0 0 3px rgba(255,255,255,0.5));
        }

        .original-strand { 
            stroke: #e74c3c; 
            stroke-width: 5;
        }
        .new-strand { 
            stroke: #27ae60; 
            stroke-width: 5;
        }

        .base-pair {
            stroke: #3498db;
            stroke-width: 3;
            filter: drop-shadow(0 0 2px rgba(52, 152, 219, 0.8));
        }

        .enzyme {
            filter: drop-shadow(0 0 5px rgba(155, 89, 182, 0.8));
        }

        .enzyme-circle {
            fill: #9b59b6;
            stroke: #8e44ad;
            stroke-width: 2;
        }

        .enzyme-text {
            fill: white;
            font-size: 12px;
            font-weight: bold;
            text-anchor: middle;
            filter: drop-shadow(0 0 2px rgba(0,0,0,0.5));
        }

        .base-text {
            font-size: 14px;
            font-weight: bold;
            text-anchor: middle;
            fill: #ecf0f1;
            filter: drop-shadow(0 0 2px rgba(0,0,0,0.8));
        }

        .direction-text {
            font-size: 16px;
            font-weight: bold;
            text-anchor: middle;
            fill: #f39c12;
            filter: drop-shadow(0 0 2px rgba(0,0,0,0.8));
        }

        /* Animations */
        .rotating {
            animation: rotate 4s linear infinite;
            transform-origin: center;
        }

        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .pulsing {
            animation: pulse 2s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.6; }
        }

        .moving {
            transition: all 2s ease-in-out;
        }

        .appearing {
            transition: opacity 1.5s ease-in-out;
        }

        .legend {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 8px;
            background: rgba(255, 255, 255, 0.8);
            padding: 8px 15px;
            border-radius: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .legend-dot {
            width: 16px;
            height: 16px;
            border-radius: 50%;
            box-shadow: 0 0 5px rgba(0,0,0,0.3);
        }

        .progress-bar {
            width: 100%;
            height: 6px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 3px;
            margin: 20px 0;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #3498db, #e74c3c);
            border-radius: 3px;
            transition: width 0.5s ease;
        }
</style>
</head>
<body>
    <div class="sidebar-toggle" id="sidebarToggle">
        <span class="sidebar-toggle-icon">☰</span>
    </div>
    
    <div class="sidebar">
        <h2>Navigation</h2>
        <ul class="nav-links">
            <li><a href="historical.html">Warhead and Wonder drugs</a></li>
            <li><a href="mechanism.html">Cellular blueprints</a></li>
            <li class="has-submenu">
                <a href="agents.html">Weapons of the cell war</a>
                <ul class="sub-links">
                  <li><a href="agents.html">Summary</a></li>
                  <li><a href="nitrogen-mustards.html">Nitrogen Mustards</a></li>
                  <li><a href="oxazaphosphorines.html">Oxazaphosphorines</a></li>
                  <li><a href="nitrosoureas.html">Nitrosourea</a></li>
                  <li><a href="mitomycin-c.html">Mitomycin C</a></li>
                </ul>
              </li>
            <li><a href="references.html">References</a></li>
            <li><a href="index.html">Authors</a></li>
        </ul>
    </div>

    <div class="main-content">
        <div class="chemotherapy-animation">
            <div class="header">
                <h1>From Mustard Gas to Chemotherapy</h1>
                <p>From chemical warfare to cancer cure, the alchemical evolution of chemotherapy drugs</p>
            </div>
            

            <div class="scene chemistry-theme">
                <figure>
                    <img src="atp.png" alt="ATP">
                    <figcaption class="main-caption">Structure of ATP</figcaption>
                    <figcaption class="source-caption">
                        <i>Credit to Abbott, R. [Ryan Abbolt]. (2017, May 17). 06 2 DNA Helicase[Video]. YouTube. </i>
                        <br>
                        <i>Unknown author. (n.d.). [Chemical structure diagram] [Image]. LibreTexts Chemistry.</i>
                        <br>
                        <i>Unknown author. (n.d.). ADP molecule [Image]. Study.com.</i>
                        <br>
                        <i>Unknown author. (n.d.). [DNA double helix illustration] [Image]. CleanPNG.</i>
                    </figcaption>

                    <div class="big-arrow" style = "transform: rotate(180deg);"></div>

                    <img src="adp.png" alt="ADP">

                </figure>
<!--
               <p > The helicase binds tightly to one DNA strand, and as it translocates forward, it pulls that strand.
                    This causes the complementary strand to be physically pushed away as base pairing is disrupted.
                    The separation destabilizes the nucleotide base pairs, causing them to preferentially separate.
                </p> 
                -->
            </div>
            
            <div class="scene chemistry-theme">
                <figure>
                    <img src="https://socialsci.libretexts.org/@api/deki/files/128770/image7-7.jpg?revision=1" alt="DNA replication process">
                    <figcaption class="main-caption">Process of DNA replication</figcaption>
                    <figcaption class="source-caption">
                        <i>Credit to Pharmaffiliates. (n.d.). Chemical structure of [compound name, if known] [Image]. Pharmaffiliates.</i>
                        <br>
                        <i>Credit to Unknown author. (n.d.). Phosphoramide mustard [Image]. lirp.cdn-website.com. </i>
                    </figcaption>
                </figure>
            </div>

    
            <div class="scene chemistry-theme">
                <figure>
                    <img src="https://upload.wikimedia.org/wikipedia/commons/8/8d/Crosslinking.jpg" alt="Cross Linkage">
                    <figcaption class="main-caption">Cross Linkage</figcaption>
                    <figcaption class="source-caption">
                        <i>Credit to Ribbit~commonswiki. (2006). Crosslinking [Image]. Wikimedia Commons.</i>
                    </figcaption>
                </figure>
                <p class="description">
                    For Interstrand Cross Linkage, the helicase is unable to unwind the two strands as they form a strong σ-bond instead of hydrogen bonds between the nucleotide base pairs
                    For Intrastrand Cross Linkage, the α-Polymerase or the fragments are unable to make a complete copy of the lagging or leading strand respectively

                </p>
            </div>

            <!-- Primase and primers -->
            <g id="primers" opacity="0">
                <!-- Leading strand primer -->
                <rect x="410" y="115" width="20" height="6" fill="#F4A261" rx="2" id="leading-primer"/>
                <!-- Lagging strand primers -->
                <rect x="410" y="280" width="20" height="6" fill="#F4A261" rx="2" id="lagging-primer1"/>
                <rect x="480" y="315" width="20" height="6" fill="#F4A261" rx="2" id="lagging-primer2"/>
                
                <g id="primase">
                    <rect x="390" y="300" width="35" height="12" fill="#06D6A0" rx="3"/>
                    <text x="407" y="309" class="enzyme-label">Primase</text>
                </g>
            </g>

            <!-- DNA Polymerases -->
            <g id="polymerases" opacity="0">
                <g id="pol-leading">
                    <rect x="440" y="105" width="40" height="15" fill="#118AB2" rx="4"/>
                    <text x="460" y="115" class="enzyme-label">Pol III</text>
                </g>
                
                <g id="pol-lagging1">
                    <rect x="440" y="275" width="40" height="15" fill="#118AB2" rx="4"/>
                    <text x="460" y="285" class="enzyme-label">Pol III</text>
                </g>
                <div class="container">
                    <h1>🧬 DNA Double Helix Replication</h1>
                    <p class="subtitle">Watch the iconic twisted ladder make perfect copies of itself</p>
            
                    <div class="explanation">
                        <h3>🌟 What makes DNA special?</h3>
                        <p><strong>The Double Helix:</strong> DNA isn't just a ladder - it's a twisted ladder! This spiral shape (called a double helix) is one of the most famous structures in science. The twisting helps pack lots of genetic information into a tiny space.</p>
                        <p><strong>Perfect Copying:</strong> Before every cell division, DNA must make an exact copy of itself. This process is so precise that errors happen less than once in a billion base pairs!</p>
                    </div>
            
                    <div class="step-info" id="currentStep">
                        Click "Start Replication" to see the double helix unwind and copy itself!
                    </div>
            
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressBar" style="width: 0%"></div>
                    </div>
            
                    <div class="dna-container">
                        <svg class="dna-svg" viewBox="0 0 800 400" xmlns="http://www.w3.org/2000/svg">
                            
                            <!-- Step 1: Original Double Helix -->
                            <g id="original-helix">
                                <!-- Create the twisted double helix using sine waves -->
                                <path d="M 100 200 Q 150 150 200 200 T 300 200 T 400 200 T 500 200 T 600 200" 
                                      class="dna-strand original-strand" id="strand1"/>
                                <path d="M 100 200 Q 150 250 200 200 T 300 200 T 400 200 T 500 200 T 600 200" 
                                      class="dna-strand original-strand" id="strand2"/>
                                
                                <!-- Base pairs at crossing points -->
                                <g class="base-pairs">
                                    <line x1="200" y1="200" x2="200" y2="200" class="base-pair" stroke-width="4">
                                        <animate attributeName="y2" values="200;180;200" dur="2s" repeatCount="indefinite"/>
                                    </line>
                                    <line x1="300" y1="200" x2="300" y2="200" class="base-pair" stroke-width="4">
                                        <animate attributeName="y2" values="200;220;200" dur="2s" repeatCount="indefinite"/>
                                    </line>
                                    <line x1="400" y1="200" x2="400" y2="200" class="base-pair" stroke-width="4">
                                        <animate attributeName="y2" values="200;180;200" dur="2s" repeatCount="indefinite"/>
                                    </line>
                                    <line x1="500" y1="200" x2="500" y2="200" class="base-pair" stroke-width="4">
                                        <animate attributeName="y2" values="200;220;200" dur="2s" repeatCount="indefinite"/>
                                    </line>
                                </g>
                                
                                <!-- Direction indicators -->
                                <text x="80" y="190" class="direction-text">5'</text>
                                <text x="80" y="220" class="direction-text">3'</text>
                                <text x="620" y="190" class="direction-text">3'</text>
                                <text x="620" y="220" class="direction-text">5'</text>
                                
                                <!-- Base labels -->
                                <text x="200" y="175" class="base-text">A</text>
                                <text x="200" y="235" class="base-text">T</text>
                                <text x="300" y="235" class="base-text">G</text>
                                <text x="300" y="175" class="base-text">C</text>
                                <text x="400" y="175" class="base-text">T</text>
                                <text x="400" y="235" class="base-text">A</text>
                                <text x="500" y="235" class="base-text">C</text>
                                <text x="500" y="175" class="base-text">G</text>
                            </g>
            
                            <!-- Step 2: Helicase enzyme -->
                            <g id="helicase" opacity="0">
                                <g class="enzyme pulsing">
                                    <circle cx="250" cy="200" r="25" class="enzyme-circle"/>
                                    <text x="250" y="190" class="enzyme-text">DNA</text>
                                    <text x="250" y="205" class="enzyme-text">Helicase</text>
                                    <text x="250" y="240" class="base-text" style="font-size: 11px;">Unwinds the helix</text>
                                </g>
                            </g>
            
                            <!-- Step 3: Unwinding helix -->
                            <g id="unwinding" opacity="0">
                                <!-- Fork structure -->
                                <path d="M 100 200 L 300 200" class="dna-strand original-strand"/>
                                <path d="M 100 200 L 300 200" class="dna-strand original-strand" transform="translate(0,0)"/>
                                
                                <!-- Separating strands -->
                                <path d="M 300 200 Q 350 160 400 140 T 500 120 T 600 100" 
                                      class="dna-strand original-strand moving" id="top-separated"/>
                                <path d="M 300 200 Q 350 240 400 260 T 500 280 T 600 300" 
                                      class="dna-strand original-strand moving" id="bottom-separated"/>
                                
                                <!-- Replication fork -->
                                <text x="320" y="190" class="base-text" style="font-size: 12px;">Replication Fork</text>
                                <path d="M 300 195 L 320 180 L 300 205" stroke="#f39c12" stroke-width="2" fill="none"/>
                            </g>
            
                            <!-- Step 4: DNA Polymerase building new strands -->
                            <g id="polymerase" opacity="0">
                                <!-- Leading strand synthesis -->
                                <g class="enzyme">
                                    <circle cx="450" cy="180" r="20" class="enzyme-circle"/>
                                    <text x="450" y="175" class="enzyme-text" style="font-size: 10px;">DNA</text>
                                    <text x="450" y="188" class="enzyme-text" style="font-size: 10px;">Polymerase</text>
                                </g>
                                
                                <!-- Lagging strand synthesis -->
                                <g class="enzyme">
                                    <circle cx="450" cy="220" r="20" class="enzyme-circle"/>
                                    <text x="450" y="215" class="enzyme-text" style="font-size: 10px;">DNA</text>
                                    <text x="450" y="228" class="enzyme-text" style="font-size: 10px;">Polymerase</text>
                                </g>
                                
                                <!-- New strands being synthesized -->
                                <path d="M 320 170 Q 370 160 420 150 L 500 140" 
                                      class="dna-strand new-strand appearing" stroke-dasharray="5,5">
                                    <animate attributeName="stroke-dashoffset" values="10;0" dur="3s" repeatCount="indefinite"/>
                                </path>
                                <path d="M 320 230 Q 370 240 420 250 L 500 260" 
                                      class="dna-strand new-strand appearing" stroke-dasharray="5,5">
                                    <animate attributeName="stroke-dashoffset" values="10;0" dur="3s" repeatCount="indefinite"/>
                                </path>
                                
                                <!-- Base pairing indicators -->
                                <line x1="380" y1="130" x2="380" y2="150" class="base-pair"/>
                                <line x1="450" y1="120" x2="450" y2="140" class="base-pair"/>
                                <line x1="380" y1="250" x2="380" y2="270" class="base-pair"/>
                                <line x1="450" y1="260" x2="450" y2="280" class="base-pair"/>
                            </g>
            
                            <!-- Step 5: Two complete double helices -->
                            <g id="two-helices" opacity="0">
                                <!-- First complete helix -->
                                <g transform="translate(0, -60)">
                                    <path d="M 150 200 Q 200 170 250 200 T 350 200 T 450 200 T 550 200" 
                                          class="dna-strand original-strand"/>
                                    <path d="M 150 200 Q 200 230 250 200 T 350 200 T 450 200 T 550 200" 
                                          class="dna-strand new-strand"/>
                                    <line x1="250" y1="200" x2="250" y2="200" class="base-pair" stroke-width="3"/>
                                    <line x1="350" y1="200" x2="350" y2="200" class="base-pair" stroke-width="3"/>
                                    <line x1="450" y1="200" x2="450" y2="200" class="base-pair" stroke-width="3"/>
                                    <text x="350" y="160" class="base-text" style="font-size: 14px;">DNA Copy #1</text>
                                </g>
                                
                                <!-- Second complete helix -->
                                <g transform="translate(0, 60)">
                                    <path d="M 150 200 Q 200 170 250 200 T 350 200 T 450 200 T 550 200" 
                                          class="dna-strand original-strand"/>
                                    <path d="M 150 200 Q 200 230 250 200 T 350 200 T 450 200 T 550 200" 
                                          class="dna-strand new-strand"/>
                                    <line x1="250" y1="200" x2="250" y2="200" class="base-pair" stroke-width="3"/>
                                    <line x1="350" y1="200" x2="350" y2="200" class="base-pair" stroke-width="3"/>
                                    <line x1="450" y1="200" x2="450" y2="200" class="base-pair" stroke-width="3"/>
                                    <text x="350" y="240" class="base-text" style="font-size: 14px;">DNA Copy #2</text>
                                </g>
                                
                                <!-- Success particles -->
                                <g class="pulsing">
                                    <circle cx="200" cy="150" r="3" fill="#f39c12" opacity="0.8"/>
                                    <circle cx="500" cy="180" r="2" fill="#e74c3c" opacity="0.6"/>
                                    <circle cx="300" cy="250" r="2.5" fill="#27ae60" opacity="0.7"/>
                                    <circle cx="450" cy="120" r="2" fill="#3498db" opacity="0.8"/>
                                </g>
                            </g>
            
                        </svg>
                    </div>
            
                    <div class="controls">
                        <button class="btn" id="startBtn">🚀 Start Replication</button>
                        <button class="btn" id="nextBtn" disabled>Next Step →</button>
                        <button class="btn" id="autoBtn">⚡ Auto Play</button>
                        <button class="btn" id="resetBtn">🔄 Reset</button>
                    </div>
            
                    <div class="legend">
                        <div class="legend-item">
                            <div class="legend-dot" style="background: #e74c3c;"></div>
                            <span>Original DNA Strand</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-dot" style="background: #27ae60;"></div>
                            <span>New DNA Strand</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-dot" style="background: #3498db;"></div>
                            <span>Base Pairs (A-T, G-C)</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-dot" style="background: #9b59b6;"></div>
                            <span>Replication Enzymes</span>
                        </div>
                    </div>
            
                    <div class="explanation">
                        <h3>🔬 The Replication Process (Detailed):</h3>
                        <ol style="padding-left: 20px;">
                            <li><strong>Double Helix Structure:</strong> DNA exists as two intertwined strands forming the famous double helix shape</li>
                            <li><strong>Helicase Unwinds:</strong> The helicase enzyme unwinds and separates the two strands, creating a replication fork</li>
                            <li><strong>Fork Formation:</strong> The Y-shaped replication fork moves along the DNA, exposing single strands</li>
                            <li><strong>Polymerase Action:</strong> DNA polymerase enzymes build new complementary strands (A pairs with T, G pairs with C)</li>
                            <li><strong>Two Identical Helices:</strong> The result is two identical double helix molecules, each containing one original and one new strand</li>
                        </ol>
                        <p><em>This process happens in every cell before division, ensuring each new cell gets a complete copy of your genetic code!</em></p>
                    </div>
            
                </div>
            
                <script>
            const svgNS = "http://www.w3.org/2000/svg";

// Draw the progressively unwinding DNA, from double helix to full fork
function drawProgressiveDNA(svg, x_center, y_offset, height, forkProgress = 0) {
    // forkProgress: 0 = fully double helix, 1 = fully forked
    const amplitude = 40, frequency = 0.025, segmentStep = 2;
    const backboneColorBlue = '#007bff';
    const backboneColorRed = '#dc3545';
    const pairedHeight = height * (1 - forkProgress);

    // Draw helical region (sine waves)
    let dBlue = '', dRed = '';
    const startY = y_offset;
    const endY = y_offset + pairedHeight;
    for (let currentY = startY; currentY <= endY; currentY += segmentStep) {
        const xBlue = x_center - amplitude * Math.cos(frequency * (currentY - startY));
        const xRed  = x_center - amplitude * Math.cos(frequency * (currentY - startY) + Math.PI);
        if (currentY === startY) {
            dBlue += `M${xBlue},${currentY}`;
            dRed += `M${xRed},${currentY}`;
        } else {
            dBlue += ` L${xBlue},${currentY}`;
            dRed += ` L${xRed},${currentY}`;
        }
    }
    // Fork region (straight, diverging lines)
    if (forkProgress > 0) {
        const wavyTop = y_offset + pairedHeight;
        const xBlueTop = x_center - amplitude * Math.cos(frequency * (wavyTop - startY));
        const xRedTop  = x_center - amplitude * Math.cos(frequency * (wavyTop - startY) + Math.PI);
        const forkOffset = 60 * forkProgress;
        const forkTop = y_offset + height;
        dBlue += ` L${xBlueTop - forkOffset},${forkTop}`;
        dRed  += ` L${xRedTop + forkOffset},${forkTop}`;
    }

    // Draw backbone paths
    const strandBlue = document.createElementNS(svgNS, 'path');
    strandBlue.setAttribute('d', dBlue);
    strandBlue.setAttribute('stroke', backboneColorBlue);
    strandBlue.setAttribute('stroke-width', 5);
    strandBlue.setAttribute('fill', 'none');
    svg.appendChild(strandBlue);

    const strandRed = document.createElementNS(svgNS, 'path');
    strandRed.setAttribute('d', dRed);
    strandRed.setAttribute('stroke', backboneColorRed);
    strandRed.setAttribute('stroke-width', 5);
    strandRed.setAttribute('fill', 'none');
    svg.appendChild(strandRed);

    // Draw base pairs in paired region
    if (forkProgress < 1) {
        const basePairs = 8;
        for (let i = 0; i < basePairs; i++) {
            const frac = (i + 1) / (basePairs + 1);
            const y = y_offset + frac * pairedHeight;
            const xBlue = x_center - amplitude * Math.cos(frequency * (y - startY));
            const xRed  = x_center - amplitude * Math.cos(frequency * (y - startY) + Math.PI);
            const hBond = document.createElementNS(svgNS, 'line');
            hBond.setAttribute('x1', xBlue);
            hBond.setAttribute('y1', y);
            hBond.setAttribute('x2', xRed);
            hBond.setAttribute('y2', y);
            hBond.setAttribute('stroke', '#BDC3C7');
            hBond.setAttribute('stroke-width', '2');
            svg.appendChild(hBond);
        }
    }
}

// Draws the Helicase enzyme as a purple circle at the fork
function drawHelicase(svg, x, y) {
    let circle = document.createElementNS(svgNS, "circle");
    circle.setAttribute("cx", x);
    circle.setAttribute("cy", y);
    circle.setAttribute("r", 22);
    circle.setAttribute("fill", "#9b59b6");
    circle.setAttribute("class", "enzyme");
    svg.appendChild(circle);
    let text = document.createElementNS(svgNS, "text");
    text.setAttribute("x", x);
    text.setAttribute("y", y + 6);
    text.setAttribute("text-anchor", "middle");
    text.setAttribute("fill", "#fff");
    text.setAttribute("font-size", "13px");
    text.textContent = "Helicase";
    svg.appendChild(text);
}

// Draw SSB (Single-Strand Binding) proteins as small purple ellipses on single strands
function drawSSB(svg, x_center, y_offset, height, forkProgress) {
    if (forkProgress < 0.3) return;
    const pairedHeight = height * (1 - forkProgress);
    const forkHeight = height * forkProgress;
    const forkY = y_offset + pairedHeight;
    const n = Math.floor(3 * forkProgress);
    for (let i = 0; i < n; i++) {
        let frac = (i + 1) / (n + 1);
        let y = forkY + frac * forkHeight * 0.7;
        // left strand
        let ellL = document.createElementNS(svgNS, "ellipse");
        ellL.setAttribute("cx", x_center - 80 * forkProgress);
        ellL.setAttribute("cy", y);
        ellL.setAttribute("rx", 12);
        ellL.setAttribute("ry", 8);
        ellL.setAttribute("fill", "#9b59b6");
        ellL.setAttribute("opacity", "0.7");
        ellL.setAttribute("class", "enzyme");
        svg.appendChild(ellL);
        // right strand
        let ellR = document.createElementNS(svgNS, "ellipse");
        ellR.setAttribute("cx", x_center + 80 * forkProgress);
        ellR.setAttribute("cy", y);
        ellR.setAttribute("rx", 12);
        ellR.setAttribute("ry", 8);
        ellR.setAttribute("fill", "#9b59b6");
        ellR.setAttribute("opacity", "0.7");
        ellR.setAttribute("class", "enzyme");
        svg.appendChild(ellR);
    }
}

// Draw Primase as a purple rectangle at the fork
function drawPrimase(svg, x, y) {
    let rect = document.createElementNS(svgNS, "rect");
    rect.setAttribute("x", x - 28);
    rect.setAttribute("y", y + 32);
    rect.setAttribute("width", 56);
    rect.setAttribute("height", 18);
    rect.setAttribute("fill", "#9b59b6");
    rect.setAttribute("rx", 3);
    rect.setAttribute("class", "enzyme");
    svg.appendChild(rect);
    let text = document.createElementNS(svgNS, "text");
    text.setAttribute("x", x);
    text.setAttribute("y", y + 45);
    text.setAttribute("fill", "#fff");
    text.setAttribute("font-size", "13px");
    text.setAttribute("text-anchor", "middle");
    text.textContent = "Primase";
    svg.appendChild(text);
}

// Draw RNA primers as short orange lines
function drawRNAprimers(svg, x_center, y_offset, height, forkProgress) {
    if (forkProgress < 0.95) return;
    const y = y_offset + height * 0.85;
    // Leading primer
    let lead = document.createElementNS(svgNS, "rect");
    lead.setAttribute("x", x_center - 38);
    lead.setAttribute("y", y);
    lead.setAttribute("width", 24);
    lead.setAttribute("height", 5);
    lead.setAttribute("fill", "#ffb347");
    svg.appendChild(lead);
    // Lagging primer (farther up)
    let lag = document.createElementNS(svgNS, "rect");
    lag.setAttribute("x", x_center + 14);
    lag.setAttribute("y", y - 40);
    lag.setAttribute("width", 24);
    lag.setAttribute("height", 5);
    lag.setAttribute("fill", "#ffb347");
    svg.appendChild(lag);
}

// Draw DNA Polymerase as blue rectangles
function drawPolymerases(svg, x_center, y_offset, height, forkProgress) {
    if (forkProgress < 1) return;
    // Leading
    let polLead = document.createElementNS(svgNS, "rect");
    polLead.setAttribute("x", x_center - 80);
    polLead.setAttribute("y", y_offset + height * 0.84);
    polLead.setAttribute("width", 38);
    polLead.setAttribute("height", 16);
    polLead.setAttribute("fill", "#118AB2");
    polLead.setAttribute("rx", 4);
    svg.appendChild(polLead);
    let textLead = document.createElementNS(svgNS, "text");
    textLead.setAttribute("x", x_center - 61);
    textLead.setAttribute("y", y_offset + height * 0.84 + 12);
    textLead.setAttribute("fill", "#fff");
    textLead.setAttribute("font-size", "11px");
    textLead.setAttribute("text-anchor", "middle");
    textLead.textContent = "Pol III";
    svg.appendChild(textLead);

    // Lagging
    let polLag = document.createElementNS(svgNS, "rect");
    polLag.setAttribute("x", x_center + 55);
    polLag.setAttribute("y", y_offset + height * 0.65);
    polLag.setAttribute("width", 38);
    polLag.setAttribute("height", 16);
    polLag.setAttribute("fill", "#118AB2");
    polLag.setAttribute("rx", 4);
    svg.appendChild(polLag);
    let textLag = document.createElementNS(svgNS, "text");
    textLag.setAttribute("x", x_center + 74);
    textLag.setAttribute("y", y_offset + height * 0.65 + 12);
    textLag.setAttribute("fill", "#fff");
    textLag.setAttribute("font-size", "11px");
    textLag.setAttribute("text-anchor", "middle");
    textLag.textContent = "Pol III";
    svg.appendChild(textLag);
}

// Draw leading strand (continuous green line)
function drawLeadingStrand(svg, x_center, y_offset, height, forkProgress) {
    if (forkProgress < 1) return;
    const yStart = y_offset + height * 0.85;
    const yEnd = y_offset + height;
    let path = document.createElementNS(svgNS, "line");
    path.setAttribute("x1", x_center - 80);
    path.setAttribute("y1", yStart);
    path.setAttribute("x2", x_center - 80);
    path.setAttribute("y2", yEnd);
    path.setAttribute("stroke", "#27ae60");
    path.setAttribute("stroke-width", 5);
    svg.appendChild(path);
}

// Draw Okazaki fragments (short dashed green lines)
function drawOkazakiFragments(svg, x_center, y_offset, height, forkProgress) {
    if (forkProgress < 1) return;
    const yBase = y_offset + height * 0.7;
    for (let i = 0; i < 3; i++) {
        let frag = document.createElementNS(svgNS, "line");
        frag.setAttribute("x1", x_center + 80);
        frag.setAttribute("y1", yBase - i * 18);
        frag.setAttribute("x2", x_center + 80);
        frag.setAttribute("y2", yBase - i * 18 + 12);
        frag.setAttribute("stroke", "#27ae60");
        frag.setAttribute("stroke-width", 5);
        frag.setAttribute("stroke-dasharray", "8,4");
        svg.appendChild(frag);
    }
}

// Overlay new (green) strands on two double helices at the end
// Only overlays the green (new) strand on one side (left or right)
function drawSingleNewStrandOverlay(svg, x_center, y_offset, height, side) {
    let rect = document.createElementNS(svgNS, "rect");
    if (side === "left") {
        rect.setAttribute("x", x_center - 15 - 5);
    } else { // "right"
        rect.setAttribute("x", x_center + 15 - 5);
    }
    rect.setAttribute("y", y_offset + 20);
    rect.setAttribute("width", 10);
    rect.setAttribute("height", height - 40);
    rect.setAttribute("fill", "#27ae60");
    svg.appendChild(rect);
}
const dnaSteps = [
  {
    title: "Step 1: Original DNA Double Helix",
    description: "DNA is made of two strands twisted together to form a double helix. Each strand is made of a backbone (blue or red) with base pairs connecting them in the middle. The DNA is stable and ready for replication.",
    draw: (svg) => {
      drawProgressiveDNA(svg, 340, 60, 200, 0);
    }
  },
  {
    title: "Step 2: Helicase Unzips the DNA",
    description: "The enzyme helicase (purple) attaches to the DNA at a starting point and moves along the helix, separating the two strands. This creates a Y-shaped area called the replication fork.",
    draw: (svg) => {
      drawProgressiveDNA(svg, 340, 60, 200, 0.3);
      drawHelicase(svg, 340, 60 + 200 * 0.3);
    }
  },
  {
    title: "Step 3: SSB Proteins Stabilize the Strands",
    description: "Single-strand binding (SSB) proteins (purple ovals) bind to the separated strands. They keep the strands apart and prevent them from sticking back together while replication happens.",
    draw: (svg) => {
      drawProgressiveDNA(svg, 340, 60, 200, 0.7);
      drawHelicase(svg, 340, 60 + 200 * 0.7);
      drawSSB(svg, 340, 60, 200, 0.7);
    }
  },
  {
    title: "Step 4: Primase Adds RNA Primers",
    description: "The enzyme primase (purple rectangle) places short RNA primers (orange) on both DNA strands. These primers act as starting points so the next enzyme knows where to begin building new DNA.",
    draw: (svg) => {
      drawProgressiveDNA(svg, 340, 60, 200, 1);
      drawHelicase(svg, 340, 60 + 200);
      drawSSB(svg, 340, 60, 200, 1);
      drawPrimase(svg, 340, 60 + 200);
      drawRNAprimers(svg, 340, 60, 200, 1);
    }
  },
  {
    title: "Step 5: DNA Polymerase Builds New Strands",
    description: "DNA polymerase (blue rectangles) builds new DNA in the 5'→3' direction. On one strand (the leading strand), the enzyme works smoothly toward the fork. On the other (the lagging strand), the enzyme builds in short pieces called Okazaki fragments (dashed green lines), away from the fork.",
    draw: (svg) => {
      drawProgressiveDNA(svg, 340, 60, 200, 1);
      drawHelicase(svg, 340, 60 + 200);
      drawSSB(svg, 340, 60, 200, 1);
      drawPrimase(svg, 340, 60 + 200);
      drawRNAprimers(svg, 340, 60, 200, 1);
      drawPolymerases(svg, 340, 60, 200, 1);
      drawLeadingStrand(svg, 340, 60, 200, 1);
      drawOkazakiFragments(svg, 340, 60, 200, 1);
    }
  },
  {
  title: "Step 6: DNA Replication Complete",
  description: "Replication is finished. Each DNA double helix has one original strand (blue or red) and one new strand (green). This is called 'semi-conservative' replication.",
  draw: (svg) => {
    // First DNA molecule: left side blue (parent), right side green (new)
    drawProgressiveDNA(svg, 240, 60, 120, 0);
    drawSingleNewStrandOverlay(svg, 240, 60, 120, "right");

    // Second DNA molecule: left side green (new), right side red (parent)
    drawProgressiveDNA(svg, 440, 140, 120, 0);
    drawSingleNewStrandOverlay(svg, 440, 140, 120, "left");
  }
}
];
// --- Animation logic ---
let currentStep = 0;
function clearSVG(id) {
    const svg = document.getElementById(id);
    while (svg.firstChild) svg.removeChild(svg.firstChild);
}
function updateStep() {
    document.getElementById('dna-step-title').textContent = dnaSteps[currentStep].title;
    document.getElementById('dna-explanation').textContent = dnaSteps[currentStep].description;
    clearSVG('dna-animation');
    dnaSteps[currentStep].draw(document.getElementById('dna-animation'));
    document.getElementById('nextBtn').disabled = (currentStep >= dnaSteps.length - 1);
}
function nextStep() {
    if (currentStep < dnaSteps.length - 1) {
        currentStep++;
        updateStep();
    }
}
function reset() {
    currentStep = 0;
    updateStep();
}
document.getElementById('nextBtn').addEventListener('click', nextStep);
document.getElementById('resetBtn').addEventListener('click', reset);
updateStep();
            </script>
            </body>
            </html>
